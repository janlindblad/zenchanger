{% extends "home/event_base.html" %}

{% block title %}Delete Event {{ event.id }}{% endblock %}

{% block container_width %}600px{% endblock %}

{% block nav_align %}text-align: left;{% endblock %}

{% block nav_links %}
<a href="{% url 'event_detail' event.id %}">‚Üê Back to Event</a>
<a href="{% url 'event_list' %}">All Events</a>
<a href="{% url 'home' %}">Home</a>
{% endblock %}

{% block extra_styles %}
.delete-container {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    padding: 30px;
    border-radius: 8px;
    text-align: center;
}
.warning-icon {
    font-size: 4em;
    color: #f39c12;
    margin-bottom: 20px;
}
.event-info {
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    padding: 20px;
    margin: 20px 0;
    text-align: left;
}
.warning-text {
    color: #856404;
    font-size: 1.1em;
    margin: 20px 0;
    line-height: 1.5;
}
.danger-text {
    color: #721c24;
    font-weight: bold;
    font-size: 1.2em;
    margin: 20px 0;
}
.form-actions {
    margin-top: 30px;
}
.btn {
    padding: 12px 24px;
    font-size: 16px;
    font-weight: bold;
    margin: 10px;
}
{% endblock %}

{% block content %}
<div class="delete-container">
    <div class="warning-icon">‚ö†Ô∏è</div>
    
    <h2 style="color: #856404; margin-bottom: 20px;">Delete Event</h2>
    
    <div class="warning-text">
        You are about to permanently delete this event. This action cannot be undone.
    </div>

    <!-- Event Information -->
    <div class="event-info">
        <h3 style="margin-top: 0; color: #333;">
            Event: {{ event.id }}
            {% if event.ext_data_src == 'gc' %}
            <span class="badge badge-gc">Web Created</span>
            {% elif event.ext_data_src %}
            <span class="badge">{{ event.ext_data_src|upper }}</span>
            {% endif %}
        </h3>
        
        {% include "home/event_info_snippet.html" with show_location_link=False %}
    </div>

    <div class="danger-text">
        Are you sure you want to delete this event?
    </div>

    <form method="post" class="form-actions">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger">
            üóëÔ∏è Yes, Delete Event
        </button>
        <a href="{% url 'event_detail' event.id %}" class="btn btn-secondary">
            Cancel
        </a>
    </form>

    <div style="margin-top: 20px; font-size: 0.9em; color: #666;">
        <strong>Note:</strong> If this event has historical records, they may be preserved 
        depending on your system configuration.
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Add confirmation dialog for extra safety
    document.querySelector('form').addEventListener('submit', function(e) {
        const confirmed = confirm(
            'Are you absolutely sure you want to delete event "{{ event.id }}"?\n\n' +
            'This action is permanent and cannot be undone.'
        );
        
        if (!confirmed) {
            e.preventDefault();
        }
    });

    // Add keyboard shortcut to cancel (Escape key)
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            window.location.href = "{% url 'event_detail' event.id %}";
        }
    });
</script>
{% endblock %}